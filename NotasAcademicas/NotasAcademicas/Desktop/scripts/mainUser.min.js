function CargarParametrosGeneralesConfiguracion(){$("#imgEspera").show();$("#imgError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=500",method:"POST",dataType:"json",async:!0,success:function(n){n.toString().indexOf("ERROR")==-1?(CargarListaArchivadoresDWC(),$("#imgEspera").hide(),$("#imgError").hide(),parametrosConfiguracion=n,mostrarVisor(!0)):($("#imgEspera").hide(),$("#imgError").show())},error:function(){$("#imgEspera").hide();$("#imgError").show()}})}function CargarImagenPDF(n){$("#divTblResultados").hide();$("#visorDocumentos").show();var t=new PDFObject({url:n,pdfOpenParams:{view:"FitH",navpanes:1}}).embed("visorDocumentos")}function CargarImagenPDFDocuViewer(){$("#visorDocumentosDocuViware").show();$("#visorDocumentosPDFJs").hide();$("#visorDocumentos").height($(document).height()-60+"px");$(".visorPDFDocuVieware").height($(document).height()-60+"px");$("#divTblResultados").hide()}function CargarImagenPDFJs(){CorregirTamanoVisorPDF();mostrarVisor(!0);$("#divTblResultados").hide();$("#btnVerResultados").show();$("#btnVerDocumento").hide();$("#divDocNoPdf").hide()}function MostrarPaneles(){return}function CorregirTamanoVisorPDF(){$("#contenedorResultados").height($(window).height()-50);$("#divVisorDocumentosPDFJs").height($(window).height()-52);$(window).width()<780?($("#barraBase").show(),$("#contenedorCampos").height("100%"),$("#contenedorCampos").removeClass("contenedorCampos"),$("#contenedorCampos").addClass("contenedorCamposSM")):($("#barraBase").hide(),$("#contenedorCampos").height($(window).height()-50),$("#contenedorCampos").removeClass("contenedorCamposSM"),$("#contenedorCampos").addClass("contenedorCampos"));return}function CargarListaArchivadores(){$(".imgEspera").show();$.ajax({url:"../controladores/controladorCI.ashx?op=700&usuario="+loginUsuario,method:"POST",dataType:"json",async:!0,beforeSend:function(){},success:function(n){if($(".imgEspera").hide(),!(n.toString().indexOf("ERROR")>-1)&&!(n.toString().indexOf("false")>-1))for(storage.set("archivadores",n),nombreGrupo="",idGrupo="",i=0;i<n.length;i++)nombreGrupo!=n[i].NOMBREGRUPO&&(idGrupo="gpArchivadores"+n[i].NOMBREGRUPO,gpArchivadorNew=gpMasterArchivador.clone(),gpArchivadorNew.attr("id",idGrupo),$("#contenedorArchivadores").append(gpArchivadorNew),$("#"+idGrupo+" .tituloGrupoArchivadores").text(n[i].NOMBREGRUPO),nombreGrupo=n[i].NOMBREGRUPO,$("#"+idGrupo+" .listaArchivadores").empty(),idListaArcColapsable="listaArcs"+n[i].NOMBREGRUPO,$("#"+idGrupo+" .panel-collapse").attr("id",idListaArcColapsable),$("#"+idGrupo+" .tituloGrupoArchivadores").attr("aria-controls",idListaArcColapsable),$("#"+idGrupo+" .tituloGrupoArchivadores").attr("href","#"+idListaArcColapsable)),itemArchivadorNew=itemMasterArchivador.clone(),idArchivador="archivador"+n[i].NOMBREGRUPO.replace(" ","")+n[i].Nombre,itemArchivadorNew.attr("id",idArchivador),$("#"+idGrupo+" .listaArchivadores").append(itemArchivadorNew),$("#"+idArchivador+" .tituloArchivador").text(n[i].TituloArchivador),$("#"+idArchivador).attr("data-NombreArchivadorDW5",n[i].NombreArchivadorDW5),$("#"+idArchivador).click(clickArchivadorDW)},error:function(){$(".imgEspera").hide()}})}function CargarListaArchivadoresDW(){$(".imgEspera").show();$.ajax({url:"../controladores/controladorCI.ashx?op=750&usuario="+loginUsuario,method:"POST",dataType:"json",async:!0,beforeSend:function(){},success:function(n){if(!(n.toString().indexOf("ERROR")>-1)&&!(n.toString().indexOf("false")>-1))for(storage.set("archivadores",n),nombreGrupo="",idGrupo="",i=0;i<n.length;i++)nombreGrupo!=n[i].NOMBREGRUPO&&(idGrupo="gpArchivadores"+n[i].NOMBREGRUPO.replace(" ",""),gpArchivadorNew=gpMasterArchivador.clone(),gpArchivadorNew.attr("id",idGrupo),$("#contenedorArchivadores").append(gpArchivadorNew),$("#"+idGrupo+" .tituloGrupoArchivadores").text(n[i].NOMBREGRUPO),nombreGrupo=n[i].NOMBREGRUPO,$("#"+idGrupo+" .listaArchivadores").empty(),idListaArcColapsable="listaArcs"+n[i].NOMBREGRUPO,$("#"+idGrupo+" .panel-collapse").attr("id",idListaArcColapsable),$("#"+idGrupo+" .tituloGrupoArchivadores").attr("aria-controls",idListaArcColapsable),$("#"+idGrupo+" .tituloGrupoArchivadores").attr("href","#"+idListaArcColapsable)),itemArchivadorNew=itemMasterArchivador.clone(),idArchivador="archivador"+n[i].NOMBREGRUPO.replace(" ","")+n[i].Nombre.replace(" ",""),itemArchivadorNew.attr("id",idArchivador),$("#"+idGrupo+" .listaArchivadores").append(itemArchivadorNew),$("#"+idArchivador+" .tituloArchivador").text(n[i].Nombre),$("#"+idArchivador).attr("data-NombreArchivadorDW5",n[i].NombreArchivadorDW5),$("#"+idArchivador).attr("data-fid",n[i].fid),$("#"+idArchivador).click(clickArchivadorDW);CorregirColores();panelVisible=3;MostrarPaneles();$(".imgEspera").hide()},error:function(){$(".imgEspera").hide()}})}function CargarListaArchivadoresDWB(){$(".imgEspera").show();$.ajax({url:"../controladores/controladorCI.ashx?op=750&usuario="+loginUsuario,method:"POST",dataType:"json",async:!0,beforeSend:function(){},success:function(n){if(!(n.toString().indexOf("ERROR")>-1)&&!(n.toString().indexOf("false")>-1)){for(storage.set("archivadores",n),nombreGrupo="",idGrupo="",i=0;i<n.length;i++)nombreGrupo!=n[i].NOMBREGRUPO&&(idGrupo="gpArchivadores"+n[i].NOMBREGRUPO.replace(" ",""),gpArchivadorNew=$(gpMasterArchivador).clone(),$(gpArchivadorNew).attr("id",idGrupo),$("#contenedorArchivadores").append(gpArchivadorNew),$("#"+idGrupo+" .tituloGrupoArchivadores").text(n[i].NOMBREGRUPO),nombreGrupo=n[i].NOMBREGRUPO,$("#"+idGrupo+" .listaArchivadores").empty(),idListaArcColapsable="listaArcs"+n[i].NOMBREGRUPO,$("#"+idGrupo+" .panel-collapse").attr("id",idListaArcColapsable),$("#"+idGrupo+" .tituloGrupoArchivadores").attr("aria-controls",idListaArcColapsable),$("#"+idGrupo+" .tituloGrupoArchivadores").attr("href","#"+idListaArcColapsable)),itemArchivadorNew=$(itemMasterArchivador).clone(),idArchivador="archivador"+n[i].fid,$(itemArchivadorNew).attr("id",idArchivador),$("#"+idGrupo+" .listaArchivadores").append(itemArchivadorNew),$("#"+idArchivador+" .tituloArchivador").text(n[i].Nombre),$("#"+idArchivador).attr("data-NombreArchivadorDW5",n[i].NombreArchivadorDW5),$("#"+idArchivador).attr("data-fid",n[i].fid),$("#"+idArchivador).attr("data-GUIDSEARCHDIALOG",n[i].GUIDSEARCHDIALOG),$("#"+idArchivador).click(clickArchivadorDW);panelVisible=1;MostrarPaneles();CorregirTamanoVisorPDF()}CorregirColores();panelVisible=1;MostrarPaneles();$(".imgEspera").hide()},error:function(){$(".imgEspera").hide()}})}function CargarListaArchivadoresDWC(){$(".imgEspera").show();$.ajax({url:"../controladores/controladorCI.ashx?op=750&usuario="+loginUsuario,method:"POST",dataType:"json",async:!0,beforeSend:function(){},success:function(n){if($("#barraBase").removeClass("hidden"),!(n.toString().indexOf("ERROR")>-1)&&!(n.toString().indexOf("false")>-1)){for(storage.set("archivadores",n),$("#mnuArchivadores").empty(),nombreGrupo="",idGrupo="",i=0;i<n.length;i++)nombreGrupo!=n[i].NOMBREGRUPO&&(idGrupo="gpArchivadores"+n[i].NOMBREGRUPO.replace(" ",""),gpArchivadorNew=$(gpMasterArchivador).clone(),$(gpArchivadorNew).attr("id",idGrupo),$("#contenedorArchivadores").append(gpArchivadorNew),$("#"+idGrupo+" .tituloGrupoArchivadores").text(n[i].NOMBREGRUPO),nombreGrupo=n[i].NOMBREGRUPO,$("#"+idGrupo+" .listaArchivadores").empty(),idListaArcColapsable="listaArcs"+n[i].NOMBREGRUPO,$("#"+idGrupo+" .panel-collapse").attr("id",idListaArcColapsable),$("#"+idGrupo+" .tituloGrupoArchivadores").attr("aria-controls",idListaArcColapsable),$("#"+idGrupo+" .tituloGrupoArchivadores").attr("href","#"+idListaArcColapsable)),itemArchivadorNew=$(itemMasterArchivador).clone(),idArchivador="archivador"+n[i].fid,$(itemArchivadorNew).attr("id",idArchivador),$("#"+idGrupo+" .listaArchivadores").append(itemArchivadorNew),$("#"+idArchivador+" .tituloArchivador").text(n[i].Nombre),$("#"+idArchivador).attr("data-NombreArchivadorDW5",n[i].NombreArchivadorDW5),$("#"+idArchivador).attr("data-fid",n[i].fid),$("#"+idArchivador).attr("data-guidsearchdialog",n[i].GUIDSEARCHDIALOG),$("#"+idArchivador).click(clickArchivadorDW),$("#mnuArchivadores").append('<li class=".mnuArchivador"><a href="#" data-guidsearchdialog="'+n[i].GUIDSEARCHDIALOG+'" id="'+n[i].GUIDSEARCHDIALOG+'" data-fid="'+n[i].fid+'" data-NombreArchivadorDW5="'+n[i].NombreArchivadorDW5+'">'+n[i].Nombre+"<\/a><\/li>"),$("#"+n[i].GUIDSEARCHDIALOG).click({lgudiSearch:n[i].GUIDSEARCHDIALOG},clickArchivadorDW),i==0&&clickArchivadorDW(n[i].GUIDSEARCHDIALOG);panelVisible=1;MostrarPaneles();CorregirTamanoVisorPDF();$("#contenedorCampos").removeClass("hidden");$("#contenedorCampos").addClass("show");$(window).width()<780?($("#contenedorResultados").removeClass("show"),$("#contenedorResultados").addClass("hidden")):($("#contenedorResultados").removeClass("hidden"),$("#contenedorResultados").addClass("show"));$("#barraNavegacion").removeClass("hidden");$("#barraNavegacion").addClass("show")}CorregirColores();panelVisible=1;MostrarPaneles();$(".imgEspera").hide()},error:function(){$(".imgEspera").hide()}})}function clickArchivador(){longitud=$(this).attr("id").length;idArchivador=$(this).attr("id").substr(10,longitud);NombreArchivadorDW5=$(this).attr("data-NombreArchivadorDW5");$("#btnVerResultados").hide();$("#btnVerDocumento").hide();$(".imgEspera").show();$.ajax({url:"../controladores/controladorCI.ashx?op=800&archivador="+idArchivador,method:"POST",dataType:"json",async:!0,beforeSend:function(){},success:function(n){if($(".imgEspera").hide(),!(n.toString().indexOf("ERROR")>-1)&&!(n.toString().indexOf("false")>-1))for(listaCampos=n,$("#formCampos").empty(),panelVisible=2,MostrarPaneles(),i=0;i<listaCampos.length;i++)switch(listaCampos[i].dwtype){case"TextVar":campo=templateCampoTexto.clone();idParentCampo="parentCampo"+listaCampos[i].dbname;idCampo="campo"+listaCampos[i].dbname;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(listaCampos[i].displayname);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo);$("#"+idParentCampo+" .form-control").attr("id",idCampo);$("#"+idParentCampo+" .form-control").attr("name",idCampo);$("#"+idCampo).typeahead({source:listaAutocompletePrueba});break;case"Date":campo=templateCampoFecha.clone();idParentCampo="parentCampo"+listaCampos[i].dbname;idCampo="campo"+listaCampos[i].dbname;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(listaCampos[i].displayname);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo+"0");campo0=$("#"+idParentCampo+" .form-control")[0];$(campo0).attr("id",idCampo+"0");campo1=$("#"+idParentCampo+" .form-control")[1];$(campo1).attr("id",idCampo+"1");$(campo0).attr("name",idCampo+"0");$(campo1).attr("name",idCampo+"1");$("#"+idCampo).typeahead({source:listaAutocompletePrueba});break;case"Numeric":idParentCampo="parentCampo"+listaCampos[i].dbname;idParentCampo="parentCampo"+listaCampos[i].dbname;idCampo="campo"+n[i].dbname;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(n[i].displayname);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo+"0");campo0=$("#"+idParentCampo+" .form-control")[0];$(campo0).attr("id",idCampo+"0");campo1=$("#"+idParentCampo+" .form-control")[1];$(campo1).attr("id",idCampo+"1");$(campo0).attr("name",idCampo+"0");$(campo1).attr("name",idCampo+"1");$("#"+idCampo).typeahead({source:listaAutocompletePrueba});break;case"Memo":campo=templateCampoTexto.clone();idParentCampo="parentCampo"+listaCampos[i].dbname;idCampo="campo"+n[i].dbname;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(listaCampos[i].displayname);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo);$("#"+idParentCampo+" .form-control").attr("id",idCampo);$("#"+idParentCampo+" .form-control").attr("name",idCampo);$("#"+idCampo).typeahead({source:listaAutocompletePrueba})}},error:function(){$(".imgEspera").hide()}})}function clickArchivadorDW(n){guidSearchDialog=n.data!=undefined?n.data.lgudiSearch:n;$("#divDocNoPdf").hide();mnuArchivadorSeleccionado=$("#"+guidSearchDialog);$("#btnConsultar").hide();$("#btnConsultarLite").hide();$("#btnExportarXls").hide();lId=$(mnuArchivadorSeleccionado).attr("id");fid=$(mnuArchivadorSeleccionado).attr("data-fid");$(".mnuArchivador").removeClass("active");lId=$(mnuArchivadorSeleccionado).attr("id");$(mnuArchivadorSeleccionado).addClass("active");htmlInicial=$("#"+lId+" span:nth-child(2)").html();$("#"+lId+" span:nth-child(2)").append('<img class="imgEsperaArchivador img-responsive" src="../imagenes/InocoAnimadoEspera.gif" />');$("#lblArchivadorSeleccionado").text($(mnuArchivadorSeleccionado).text());$("#divTblResultados").hide();mostrarVisor(!0);$("#btnVerResultados").hide();$("#btnVerDocumento").hide();$("#btnVerResultadosLite").hide();$("#btnVerDocumentoLite").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=850&fid="+fid+"&guidSearchDialog="+guidSearchDialog+"&usuario="+loginUsuario,method:"POST",dataType:"json",async:!0,beforeSend:function(){},success:function(n){if($(window).width()<780?($("#btnConsultar").hide(),$("#btnConsultarLite").show(),$("#contenedorCampos").removeClass("hidden"),$("#contenedorCampos").addClass("show"),$("#contenedorResultados").removeClass("show"),$("#contenedorResultados").addClass("hidden")):($("#btnConsultar").show(),$("#btnConsultarLite").hide(),$("#contenedorCampos").show(),$("#contenedorResultados").show(),$("#btnExportarXls").show()),$("#btnConsultar").show(),$("#btnDocumentoAnterior").hide(),$("#btnDocumentoSiguiente").hide(),$("#btnDocumentoAnteriorLite").hide(),$("#btnDocumentoSiguienteLite").hide(),$("#btnExportarXls").hide(),$("#"+lId+" span:nth-child(2)").html(htmlInicial),!(n.toString().indexOf("ERROR")>-1)&&!(n.toString().indexOf("false")>-1)){for(listaCampos=n,$("#formCampos").empty(),panelVisible=2,MostrarPaneles(),i=0;i<listaCampos.length;i++)for(k=0;k<listaCampos.length;k++)if(listaCampos[k].orderNumber==i+1){switch(listaCampos[k].dwType){case"TextVar":campo=$(templateCampoTexto).clone();idParentCampo="parentCampo"+listaCampos[k].dbName;idCampo="campo"+listaCampos[k].dbName;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(listaCampos[k].FieldLabel);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo);$("#"+idParentCampo+" .form-control").attr("id",idCampo);$("#"+idParentCampo+" .form-control").attr("name",idCampo);campoAutoCompletar=$($("#"+idCampo).parents(":eq(0)")).find(".btnAutoComplete");$(campoAutoCompletar).click(autoCompletarBoton);btnBorrarCampo=$("#"+idCampo).parents(":eq(1)").find(".btnBorrarContenidoCampo");$(btnBorrarCampo).click(borrarContenidoCampo);break;case"FullTextField":campo=$(templateCampoFullText).clone();idParentCampo="parentCampo"+listaCampos[k].dbName;idCampo="campo"+listaCampos[k].dbName;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(listaCampos[k].FieldLabel);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo);$("#"+idParentCampo+" .form-control").attr("id",idCampo);$("#"+idParentCampo+" .form-control").attr("name",idCampo);break;case"Date":campo=$(templateCampoFecha).clone();idParentCampo="parentCampo"+listaCampos[k].dbName;idCampo="campo"+listaCampos[k].dbName;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(listaCampos[k].FieldLabel);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo+"0");campo0=$("#"+idParentCampo+" .form-control")[0];$(campo0).attr("id",idCampo+"0");campo1=$("#"+idParentCampo+" .form-control")[1];$(campo1).attr("id",idCampo+"1");$(campo0).attr("name",idCampo+"0");$(campo1).attr("name",idCampo+"1");break;case"Numeric":campo=$(templateCampoNumerico).clone();idParentCampo="parentCampo"+listaCampos[k].dbName;idParentCampo="parentCampo"+listaCampos[k].dbName;idCampo="campo"+n[k].dbName;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(n[k].FieldLabel);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo+"0");campo0=$("#"+idParentCampo+" .form-control")[0];$(campo0).attr("id",idCampo+"0");campo1=$("#"+idParentCampo+" .form-control")[1];$(campo1).attr("id",idCampo+"1");$(campo0).attr("name",idCampo+"0");$(campo1).attr("name",idCampo+"1");$("#"+idCampo).focus(autoCompletar);$("#"+idCampo+"0").focus(autoCompletar);$("#"+idCampo+"1").focus(autoCompletar);break;case"Memo":campo=$(templateCampoTexto).clone();idParentCampo="parentCampo"+listaCampos[k].dbname;idCampo="campo"+n[k].dbName;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(listaCampos[k].FieldLabel);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo);$("#"+idParentCampo+" .form-control").attr("id",idCampo);$("#"+idParentCampo+" .form-control").attr("name",idCampo);break;case"KeywordField":campo=$(templateCampoClave).clone();idParentCampo="parentCampo"+listaCampos[k].dbName;idCampo="campo"+listaCampos[k].dbName;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(listaCampos[k].FieldLabel);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo);$("#"+idParentCampo+" .form-control").attr("id",idCampo);$("#"+idParentCampo+" .form-control").attr("name",idCampo);$("#"+idCampo).focus(autoCompletar)}break}nombreCampoFechaAlmacenamiento="DWSTOREDATETIME";tituloCampoFechaAlmacenamiento="Fecha almacenamiento";campo=$(templateCampoFecha).clone();idParentCampo="parentCampo"+nombreCampoFechaAlmacenamiento;idCampo="campo"+nombreCampoFechaAlmacenamiento;$(campo).attr("id",idParentCampo);$("#formCampos").append(campo);$("#"+idParentCampo+" .tituloCampo").text(tituloCampoFechaAlmacenamiento);$("#"+idParentCampo+" .tituloCampo").attr("for",idCampo+"0");campo0=$("#"+idParentCampo+" .form-control")[0];$(campo0).attr("id",idCampo+"0");campo1=$("#"+idParentCampo+" .form-control")[1];$(campo1).attr("id",idCampo+"1");$(campo0).attr("name",idCampo+"0");$(campo1).attr("name",idCampo+"1");$("#formCampos").append("<br/><br/><br/><br/><br/><br/>")}},error:function(){$("#"+lId+" span:nth-child(2)").html(htmlInicial)}})}function consultar(){var n,t;for($(".imgEspera").show(),$("#divTblResultados").empty(),strTblResultados="<table id='tblResultados' class='table table-striped table-bordered' ><thead><tr id='tblResultadosColsHead'><\/tr><\/thead><tfoot><tr id='tblResultadosColsFoot'><\/tr><\/tfoot><\/table>",$("#divTblResultados").append(strTblResultados),$("#tblResultados").hide(),tblRHead=$("#tblResultadosColsHead"),tblRFoot=$("#tblResultadosColsFoot"),n=[],i=0;i<listaCampos.length;i++)for(i=0;i<listaCampos.length;i++)switch(listaCampos[i].dwtype){case"Memo":break;default:tblRHead.append("<th>"+listaCampos[i].dbname+"<\/th>");tblRFoot.append("<th>"+listaCampos[i].dbname+"<\/th>");objCol={data:listaCampos[i].dbname,sTitle:listaCampos[i].displayname,orderable:!0,sType:listaCampos[i].dwtype};n.push(objCol)}frm=$("#formCampos");datosBusqueda=JSON.stringify(frm.serializeArray());$.ajax({url:"../controladores/controladorCI.ashx?op=900&NombreArchivadorDW5="+NombreArchivadorDW5+"&archivador="+idArchivador,method:"POST",dataType:"json",data:datosBusqueda,beforeSend:function(){$(".imgEspera").show()},async:!0,success:function(i){t=i;$("#tblResultados").dataTable({data:t,columns:n,language:{lengthMenu:"Mostrar _MENU_ registros por página",zeroRecords:"No se encontro ningún registro",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No se encontro ningún registro",infoFiltered:"(filtrado de  _MAX_ total registros)",search:"Buscar:",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"},loadingRecords:"Cargando registros...",processing:"Procesando...",ordering:!0}});$("#tblResultados").show();$(".imgEspera").hide()}});$("#divTblResultados").show();mostrarVisor(!1)}function consultarDW(){var n,t;try{for($(".imgEspera").show(),$(".imgEsperaBig").show(),$(".imgError").hide(),$("#divTblResultados").empty(),strTblResultados="<table id='tblResultados' class='table table-striped table-bordered table-hover table-condensed table-responsive' ><thead><tr id='tblResultadosColsHead'><\/tr><\/thead><tfoot><tr id='tblResultadosColsFoot'><\/tr><\/tfoot><\/table>",$("#divTblResultados").append(strTblResultados),$("#tblResultados").hide(),tblRHead=$("#tblResultadosColsHead"),tblRFoot=$("#tblResultadosColsFoot"),n=[],tblRHead.append("<th>ID<\/th>"),tblRFoot.append("<th>ID<\/th>"),objCol={data:"ID",sTitle:"ID",orderable:!0,sType:"numeric"},n.push(objCol),i=0;i<listaCampos.length;i++)for(i=0;i<listaCampos.length;i++)switch(listaCampos[i].dwtype){case"Memo":break;default:tblRHead.append("<th>"+listaCampos[i].dbname+"<\/th>");tblRFoot.append("<th>"+listaCampos[i].dbname+"<\/th>");objCol={data:listaCampos[i].dbname,sTitle:listaCampos[i].displayname,orderable:!0,sType:listaCampos[i].dwtype};n.push(objCol)}frm=$("#formCampos");datosBusqueda=JSON.stringify(frm.serializeArray());$.ajax({url:"../controladores/controladorCI.ashx?op=950&fid="+fid,method:"POST",dataType:"json",data:datosBusqueda,beforeSend:function(){$(".imgEspera").show()},async:!0,success:function(i){t=i;$("#tblResultados").dataTable({data:t,drawCallback:function(){$(".glyphicon-file").click(function(){dwdocid=$(this).attr("data-dwdocid");buscarImagenPorDocId()})},columns:n,language:{lengthMenu:"Mostrar _MENU_ registros por página",zeroRecords:"No se encontro ningún registro",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No se encontro ningún registro",infoFiltered:"(filtrado de  _MAX_ total registros)",search:"Buscar:",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"},loadingRecords:"Cargando registros...",processing:"Procesando...",ordering:!0}});$("#tblResultados").show();$(".imgEspera").hide();$(".imgEsperaBig").hide()},error:function(){$(".imgEspera").hide();$(".imgEsperaBig").hide();$(".imgError").show()}});$("#divTblResultados").show();mostrarVisor(!1);$(".imgError").click(function(){$(this).hide()})}catch(r){$(".imgEspera").hide();$(".imgEsperaBig").hide();$(".imgError").show()}}function consultarDWB(){var n,t;try{$("#btnConsultar").attr("disabled",!0);$(".imgEspera").show();$(".imgEsperaBig").show();$(".imgError").hide();$("#divTblResultados").empty();strTblResultados="<table id='tblResultados' class='table table-striped table-bordered table-hover table-condensed table-responsive' ><thead><tr id='tblResultadosColsHead'><\/tr><\/thead><tbody><\/tbody><tfoot><tr id='tblResultadosColsFoot'><\/tr><\/tfoot><\/table>";$("#divTblResultados").append(strTblResultados);$("#tblResultados").hide();tblRHead=$("#tblResultadosColsHead");tblRFoot=$("#tblResultadosColsFoot");n=[];frm=$("#formCampos");datosBusqueda=JSON.stringify(frm.serializeArray());$.ajax({url:"../controladores/controladorCI.ashx?op=950&fid="+fid+"&login="+loginUsuario,method:"POST",dataType:"json",data:datosBusqueda,beforeSend:function(){$(".imgEspera").show()},async:!0,success:function(i){if($("#btnConsultar").attr("disabled",!1),$("#btnConsultarLite").attr("disabled",!1),i.toString().indexOf("ERROR")==-1)if(i.length>0){for($("#btnExportarXls").show(),$("#btnDocumentoAnterior").show(),$("#btnDocumentoAnteriorLite").show(),$("#btnDocumentoSiguiente").show(),$("#btnDocumentoAnteriorLite").show(),$("#btnDocumentoAnterior").attr("disabled",!1),$("#btnDocumentoSiguiente").attr("disabled",!1),$("#btnDocumentoAnteriorLite").attr("disabled",!1),$("#btnDocumentoSiguienteLite").attr("disabled",!1),t=i,arrColumnsB=Object.keys(i[0]),k=0;k<arrColumnsB.length;k++)nombreColumna=arrColumnsB[k],tblRHead.append("<th>"+nombreColumna+"<\/th>"),tblRFoot.append("<th>"+nombreColumna+"<\/th>"),objCol={data:nombreColumna,sTitle:nombreColumna,orderable:!0},n.push(objCol);$("#tblResultados").dataTable({data:t,initComplete:function(){rowsTable=$("[data-dwdocid]");numRowsActualPageTable=rowsTable.length},drawCallback:function(){$(".glyphicon-file").click(function(){dwdocid=$(this).attr("data-dwdocid");buscarImagenPorDocId()})},columns:n,language:{lengthMenu:"Mostrar _MENU_ registros por página",zeroRecords:"No se encontro ningún registro",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No se encontro ningún registro",infoFiltered:"(filtrado de  _MAX_ total registros)",search:"Buscar:",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"},loadingRecords:"Cargando registros...",processing:"Procesando...",ordering:!0}});var r=$("#tblResultados").DataTable();$("#tblResultados tbody").on("click","tr",function(){actualRowTable=r.row(this).index();$(this).hasClass("selected")?$(this).removeClass("selected"):(r.$("tr.selected").removeClass("selected"),$(this).addClass("selected"))});$(window).width()<780?($("#contenedorResultados").removeClass("hidden"),$("#contenedorResultados").addClass("show"),$("#contenedorCampos").removeClass("show"),$("#contenedorCampos").addClass("hidden"),$("#btnDocumentoAnteriorLite").show(),$("#btnDocumentoSiguienteLite").show(),$("#btnVerResultadosLite").show()):($("#contenedorResultados").removeClass("hidden"),$("#contenedorResultados").addClass("show"),$("#contenedorCampos").removeClass("hidden"),$("#contenedorCampos").addClass("show"));$("#tblResultados").show();$(".imgEspera").hide();$(".imgEsperaBig").hide()}else $("#btnDocumentoAnterior").attr("disabled",!0),$("#btnDocumentoSiguiente").attr("disabled",!0),$(".imgEspera").hide(),$(".imgEsperaBig").hide(),$("#tblResultados").show();else $("#btnDocumentoAnterior").attr("disabled",!0),$("#btnDocumentoSiguiente").attr("disabled",!0),$(".imgEspera").hide(),$(".imgEsperaBig").hide(),$(".imgError").show()},error:function(){$("#btnConsultar").attr("disabled",!1);$("#btnDocumentoAnterior").attr("disabled",!0);$("#btnDocumentoSiguiente").attr("disabled",!0);$(".imgEspera").hide();$(".imgEsperaBig").hide();$(".imgError").show()}});$("#divTblResultados").show();mostrarVisor(!1);$(".imgError").click(function(){$(this).hide()})}catch(i){$(".imgEspera").hide();$(".imgEsperaBig").hide();$(".imgError").show();$("#btnConsultar").attr("disabled",!1)}}function consultarOld(){$(".imgEspera").show();frm=$("#formCampos");datos=JSON.stringify(frm.serializeArray());$.ajax({url:"../controladores/controladorCI.ashx?op=900&NombreArchivadorDW5="+NombreArchivadorDW5+"&archivador="+idArchivador,method:"POST",dataType:"json",data:datos,async:!0,beforeSend:function(){$(".imgEspera").show();$("#tblResultadosBody").remove()},success:function(n){if($(".imgEspera").hide(),n.toString().indexOf("ERROR")==-1){for(tblRes=n,$("#divTblResultados").empty(),strTblResultados="<table id='tblResultados'><thead><tr id='tblResultadosColsHead'><\/tr><\/thead><tfoot><tr id='tblResultadosColsFoot'><\/tr><\/tfoot><\/table>",$("#divTblResultados").append(strTblResultados),tblRHead=$("#tblResultadosColsHead"),tblRFoot=$("#tblResultadosColsFoot"),i=0;i<listaCampos.length;i++)for(i=0;i<listaCampos.length;i++)switch(listaCampos[i].dwtype){case"Memo":break;default:tblRHead.append("<th>"+listaCampos[i].dbname+"<\/th>");tblRFoot.append("<th>"+listaCampos[i].dbname+"<\/th>")}a=JSON.stringify(tblRes);$("#tblResultados").dataTable({data:a})}},error:function(){$(".imgEspera").hide()}});$("#divTblResultados").show();mostrarVisor(!1)}function buscarImagenPorDocId(){$("#btnDocumentoAnterior").attr("disabled",!0);$("#btnDocumentoSiguiente").attr("disabled",!0);glipDoc=$("[data-dwdocid="+dwdocid+"]").clone();$("[data-dwdocid="+dwdocid+"]").attr("class","");$("[data-dwdocid="+dwdocid+"]").append('<img id="imgEsperaListaCampo" class="EsperaAbrirDocumento" src="../imagenes/InocoAnimadoEsperaNegro.gif"/>');visor=$.grep(parametrosConfiguracion,function(n){return n.NOMBRECAMPO=="VisorPDFs"})[0].VALOR;$.ajax({url:"../controladores/controladorCI.ashx?op=1055&fid="+fid+"&dwdocid="+dwdocid+"&usuario="+loginUsuario+"&visor="+visor,method:"POST",dataType:"json",beforeSend:function(){$(".imgEspera").show();$(".imgError").hide();$("#btnVerDocumento").hide()},async:!0,success:function(n){if($(".selected").removeClass("selected"),$("[data-dwdocid="+dwdocid+"]").empty(),$("[data-dwdocid="+dwdocid+"]").attr("class","glyphicon glyphicon-file botonIconoNormal"),$("[data-dwdocid="+dwdocid+"]").parent().parent().addClass("selected"),n.toString().indexOf("ERROR")==-1){$("#btnDocumentoAnterior").attr("disabled",!1);$("#btnDocumentoSiguiente").attr("disabled",!1);$(".imgEspera").hide();$(".imgError").hide();$("#divTblResultados").hide();urlImagen=n;switch($.grep(parametrosConfiguracion,function(n){return n.NOMBRECAMPO=="VisorPDFs"})[0].VALOR){case"MICROCOLSA_PDFJS":frmVisorPdfJs=$("#divVisorDocumentosPDFJs iframe");divVisorExterno=$("#divDocNoPdf");lnkDocExerno=$("#lnkDocumentoExterno");divVisorExterno.show();urlImagen.toUpperCase().indexOf("PDF")>-1?(frmVisorPdfJs=$("#divVisorDocumentosPDFJs iframe"),$("#divVisorDocumentosPDFJs iframe").attr("src",n),frmVisorPdfJs.attr("src",urlImagen),divVisorExterno.hide(),frmVisorPdfJs.show()):(frmVisorPdfJs.hide(),divVisorExterno.show(),lnkDocExerno.attr("href",urlImagen));break;case"GOOGLE":$("#divVisorDocumentosGoogle iframe").attr("src",urlImagen)}mostrarVisor(!0);$("#btnVerResultados").show();$("#btnVerDocumento").hide();$("#btnVerDocumentoLite").hide();$("#btnVerResultadosLite").show()}else $(".imgEspera").hide(),$(".imgEsperaBig").hide(),$(".imgError").show(),$("#divTblResultados").show(),mostrarVisor(!1),$("#btnVerResultados").hide(),$("#btnVerDocumentoLite").hide(),$("#btnVerResultadosLite").show()},error:function(){$(".imgEspera").hide();$(".imgError").show();$("#divTblResultados").show();$("#btnVerResultados").hide();$("[data-dwdocid="+dwdocid+"]").empty();$("[data-dwdocid="+dwdocid+"]").attr("class","glyphicon glyphicon-file botonIconoNormal")}})}function cargarListasAutoCompletar(){listaAutocompletePrueba=["Comfama","El tiempo","Exito","Microcolsa"]}function autoCompletar(){try{frm=$("#formCampos");datosFrm=JSON.stringify(frm.serializeArray());idSender=$(this).attr("id");nombreCampo=idSender.replace("campo","").replace("0","").replace("1","");$.ajax({url:"../controladores/controladorCI.ashx?op=1100&fid="+fid+"&nombreCampo="+nombreCampo+"&guidSearchDialog="+guidSearchDialog+"&loginUsuario="+loginUsuario,method:"POST",dataType:"json",data:datosFrm,beforeSend:function(){$("#imgEsperaListaCampo").empty();$("#"+idSender).parent().append('<img id="imgEsperaListaCampo" class="divEsperaListaCampoVisible" src="../imagenes/InocoAnimadoEsperaGris.gif"/>')},async:!0,success:function(n){(n.toString()+"          ").substring(0,10).indexOf("ERROR")==-1?($("#imgEsperaListaCampo").remove(),$("#"+idSender).autocomplete({source:n}),$("#"+idSender).autocomplete("search","")):$("#imgEsperaListaCampo").remove()},error:function(){$("#imgEsperaListaCampo").remove();$("#imgError").show()}})}catch(n){alert(n.message)}}function autoCompletarBoton(){try{frm=$("#formCampos");datosFrm=JSON.stringify(frm.serializeArray());campo=$($(this).parents(":eq(1)")).find("input");idSender=$(campo).attr("id");nombreCampo=idSender.replace("campo","").replace("0","").replace("1","");$.ajax({url:"../controladores/controladorCI.ashx?op=1100&fid="+fid+"&nombreCampo="+nombreCampo+"&guidSearchDialog="+guidSearchDialog+"&loginUsuario="+loginUsuario,method:"POST",dataType:"json",data:datosFrm,beforeSend:function(){},async:!0,success:function(n){(n.toString()+"          ").substring(0,10).indexOf("ERROR")==-1?($("#"+idSender).autocomplete({minLength:0,source:n}),$(campo).focus(function(){$(campo).autocomplete("search","")}),$(campo).focus()):$("#imgEsperaListaCampo").remove()},error:function(){$("#imgEsperaListaCampo").remove();$("#imgError").show()}})}catch(n){alert(n.message)}}function mostrarVisor(n){switch($.grep(parametrosConfiguracion,function(n){return n.NOMBRECAMPO=="VisorPDFs"})[0].VALOR){case"MICROCOLSA_PDFJS":n?($("#divVisorDocumentosPDFJs").show(),$("#divVisorDocumentosGoogle").hide()):($("#divVisorDocumentosPDFJs").hide(),$("#divVisorDocumentosGoogle").hide());break;case"GOOGLE":n?($("#divVisorDocumentosPDFJs").hide(),$("#divVisorDocumentosGoogle").show()):($("#divVisorDocumentosPDFJs").hide(),$("#divVisorDocumentosGoogle").hide())}}function abrirDocumentoSiguiente(){rowsTable=$("[data-dwdocid]");actualRowTable<rowsTable.length-1?actualRowTable++:(tabla=$("#tblResultados").DataTable(),tabla.page("next").draw(!1),rowsTable=$("[data-dwdocid]"),actualRowTable=0);dwdocid=$(rowsTable[actualRowTable]).attr("data-dwdocid");buscarImagenPorDocId()}function abrirDocumentoAnterior(){rowsTable=$("[data-dwdocid]");actualRowTable>0?actualRowTable--:(tabla=$("#tblResultados").DataTable(),tabla.page("previous").draw(!1),rowsTable=$("[data-dwdocid]"),actualRowTable=rowsTable.length-1);dwdocid=$(rowsTable[actualRowTable]).attr("data-dwdocid");buscarImagenPorDocId()}function borrarContenidoCampo(){campo=$(this).parents(":eq(1)").find(".campoDocuware");$(campo).val("")}function ExportarExcel(){try{$("#btnExportarXls").attr("disabled",!0);$(".imgEspera").show();$(".imgEsperaBig").show();$(".imgError").hide();$("#divTblResultados").hide();$("#divDocNoPdf").hide();$("#divVisorDocumentosPDFJs").hide();frm=$("#formCampos");datosBusqueda=JSON.stringify(frm.serializeArray());var n;$.ajax({url:"../controladores/controladorCI.ashx?op=1300&fid="+fid+"&login="+loginUsuario,method:"POST",dataType:"json",data:datosBusqueda,beforeSend:function(){$(".imgEspera").show()},async:!0,success:function(t){t.toString().indexOf("ERROR")==-1?t.length>0?($("#divDocNoPdf").show(),$("#btnVerResultados").show(),$("#btnExportarXls").show(),n=t,$("#lnkDocumentoExterno").attr("href",t),$("#lnkDocumentoExterno").attr("class","fa fa-file-excel-o fa-2x"),$("#lnkDocumentoExterno").text(loginUsuario+".xls"),$(".imgEspera").hide(),$(".imgEsperaBig").hide()):($("#divTblResultados").show(),$(".imgEspera").hide(),$(".imgEsperaBig").hide()):($(".imgEspera").hide(),$(".imgEsperaBig").hide(),$(".imgError").show(),$("#divTblResultados").hide())},error:function(){$(".imgEspera").hide();$(".imgEsperaBig").hide();$(".imgError").show();$("#divTblResultados").hide()}});mostrarVisor(!1);$(".imgError").click(function(){$(this).hide()})}catch(t){$(".imgEspera").hide();$(".imgEsperaBig").hide();$(".imgError").show()}}var panelVisible=1,loginUsuario,storage,templateCampoTexto,templateCampoNumerico,templateCampoFecha,templateCampoClave,gpMasterArchivador,itemMasterArchivador,idArchivador,NombreArchivadorDW5,listaCampos,fid,dwdocid,listaAutocompletePrueba,parametrosConfiguracion,guidSearchDialog,actualRowTable,numRowsActualPageTable,rowsTable;$(document).ready(function(){$(".pagination span").css("background-color","transparent");$(".pagination span").css("color","white");$(".pagination span").css("border","none");$(".pagination span").css("cursor","pointer");$("#btnLogOut").click(function(){window.location="login.aspx"});init();$(".imgEspera").hide();$(".imgError").hide();$(".imgEsperaBig").hide();templateCampoTexto=$("#templateCampoTexto").clone();templateCampoNumerico=$("#templateCampoNumerico").clone();templateCampoFecha=$("#templateCampoFecha").clone();templateCampoClave=$("#templateCampoClave").clone();templateCampoFullText=$("#templateCampoFullText").clone();$("#formCampos").empty();gpMasterArchivador=$("#gpArchivadores1").clone();itemMasterArchivador=$("#gpArchivadores1 .itemArchivador").clone();$("#gpArchivadores1").remove();$("#gpArchivadores2").remove();$("#gpArchivadores3").remove();$("#divTblResultados").hide();$("#visorDocumentos").hide();$("#divDocNoPdf").hide();$("#btnConsultar").click(consultarDWB);$("#btnConsultarLite").click(consultarDWB);storage=$.localStorage;loginUsuario=storage.get("loginusuario");$("#btnVerDocumento").click(function(){CargarImagenPDFJs();$("#btnVerDocumento").hide()});$("#btnVerDocumentoLite").click(function(){CargarImagenPDFJs();$("#btnVerDocumentoLite").hide();$("#btnVerResultadosLite").show()});$("#btnCerrarPanelIsquuierdo").click(MostrarPaneles);$("#visorDocumentosDocuVieware").hide();$(window).resize(CorregirTamanoVisorPDF);CorregirColores();$("#btnAyuda").click(function(){$("#divDocNoPdf").hide();$("#divTblResultados").hide();$("#divVisorDocumentosPDFJs iframe").attr("src","../pdfjs/web/viewer.html?file=../../Ayuda/ManualUsuarioCiHtml5.pdf");$("#divVisorDocumentosPDFJs").show();mostrarVisor(!0)});$("#btnConsultar").hide();$("#btnVerResultados").hide();$("#btnVerDocumento").hide();$("#btnExportarXls").hide();$("#btnVerResultados").click(function(){$("#btnVerResultados").hide();$("#btnVerDocumento").show();$("#divTblResultados").show();$("#btnVerDocumentoLite").show();$("#divDocNoPdf").hide();mostrarVisor(!1)});$("#btnVerResultadosLite").click(function(){$("#btnVerResultados").hide();$("#btnVerDocumento").show();$("#divTblResultados").show();$("#btnVerDocumentoLite").show();$("#btnVerResultadosLite").hide();mostrarVisor(!1)});$("#btnExportarXls").click(ExportarExcel);CargarParametrosGeneralesConfiguracion();$("#btnDocumentoAnterior").click(abrirDocumentoAnterior);$("#btnDocumentoAnteriorLite").click(abrirDocumentoAnterior);$("#btnDocumentoSiguiente").click(abrirDocumentoSiguiente);$("#btnDocumentoSiguienteLite").click(abrirDocumentoSiguiente);$("#btnDocumentoAnterior").hide();$("#btnDocumentoAnteriorLite").hide();$("#btnDocumentoSiguiente").hide();$("#btnDocumentoSiguienteLite").hide();$("#btnDocumentoAnterior").attr("disabled",!0);$("#btnDocumentoSiguiente").attr("disabled",!0)});
//# sourceMappingURL=mainUser.min.js.map
