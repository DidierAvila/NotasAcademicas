function AdicionarPermisosCampo(){tarea=3;lUsuario=$("#selUsuarioPermisos").val();$("#DETALLE_PC_NOMBREARCHIVADOR").val("");$("#DETALLE_PC_VALOR").val("");$("#DETALLE_PC_CONDICION").val("");$("#DETALLE_PC_NOMBREARCHIVADOR_OLD").val("");$("#DETALLE_PC_CAMPO_OLD").val("");$("#DETALLE_PC_VALOR_OLD").val("");$("#DETALLE_PC_CONDICION_OLD").val("");$("#DETALLE_PC_NOMBREUSUARIO_OLD").val(lUsuario);CargarListaCamposArchivador();CargarListaCamposArchivador();$("#DETALLE_PC_CAMPO").val("");$("#modalDetallePermisosCampoLabel").html("Adicionar permiso  a usuario:"+lUsuario);$("#btnComfirmarDetallePermisosCampo").html("Adicionar");CargarCombosListaTablas();$("#modalDetallePermisosCampo").modal("show")}function ProcesarTarea(){switch(tarea){case 1:BorrarPermisoUsuario();break;case 2:ModificarPermisoUsuario();break;case 3:InsertarPermisoUsuario()}}function BorrarPermisoUsuario(){NOMBREARCHIVADOR=$($(objTarea).children()[1]).html();NOMBREUSUARIO=$($(objTarea).children()[2]).html();CAMPO=$($(objTarea).children()[3]).html();VALOR=$($(objTarea).children()[4]).html();CONDICION=$($(objTarea).children()[5]).html();$.ajax({url:"../controladores/controladorCI.ashx?op=1700&NOMBREARCHIVADOR="+NOMBREARCHIVADOR+"&NOMBREUSUARIO="+NOMBREUSUARIO+"&CAMPO="+CAMPO+"&VALOR="+VALOR+"&CONDICION="+CONDICION,method:"POST",dataType:"json",async:!0,beforeSend:function(){},success:function(n){tarea=0;objTarea=null;n.toString().indexOf("ERROR")>-1||n.toString().indexOf("false")>-1||CargarTablaPermisosCampos();$("#modalConfirmarTarea").modal("hide")},error:function(){tarea=0;objTarea=null;$("#modalConfirmarTarea").modal("hide")}})}function ModificarPermisoUsuario(){frm=$("#frmDetallePermisosCampo");datos=JSON.stringify(frm.serializeArray());$.ajax({url:"../controladores/controladorCI.ashx?op=1900",method:"POST",dataType:"json",data:datos,async:!0,beforeSend:function(){},success:function(n){$("#modalDetallePermisosCampo").modal("hide");n.toString().indexOf("ERROR")>-1||(n.toString().indexOf("false")>-1?tarea=0:(tarea=0,CargarTablaPermisosCampos()))},error:function(){$("#frmDetallePermisosCampo").modal("hide")}})}function InsertarPermisoUsuario(){frm=$("#frmDetallePermisosCampo");datos=JSON.stringify(frm.serializeArray());$.ajax({url:"../controladores/controladorCI.ashx?op=1600",method:"POST",dataType:"json",data:datos,async:!0,beforeSend:function(){},success:function(n){$("#modalDetallePermisosCampo").modal("hide");n.toString().indexOf("ERROR")>-1||(n.toString().indexOf("false")>-1?tarea=0:(tarea=0,CargarTablaPermisosCampos()))},error:function(){$("#frmDetallePermisosCampo").modal("hide")}})}function CancelarTarea(){tarea=0;objTarea=null;$("#modalConfirmarTarea").modal("hide")}function CargarDatosServidor(){$.ajax({url:"../controladores/controladorCI.ashx?op=300",method:"POST",dataType:"json",async:!0,beforeSend:function(){},success:function(n){n.toString().indexOf("ERROR")>-1?$("#vtnAlerta").show():n.toString().indexOf("false")>-1?$("#vtnAlerta").show():(CargarListaLoginsDw(),CargarTablaPermisosCampos(),CargarListaTablasArchivadoresDw(),CargarListaCondiciones(),$("#selUsuarioPermisos").change(CargarTablaPermisosCampos),$("#servidorAdmin").val(n.servidorAdmin),$("#driverAdmin").val(n.driverAdmin),$("#usuarioBd").val(n.usuarioBd),$("#nombreDBConsulta").val(n.nombreDBConsulta))},error:function(){$("#vtnAlerta").show()}})}function GuardarDatosServidor(){frm=$("#formConexionPpal");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=400",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function CargarListaCondiciones(){$.ajax({url:"../controladores/controladorCI.ashx?op=2000",method:"POST",dataType:"json",async:!0,success:function(n){n.toString().indexOf("ERROR")==-1&&(listaCondiciones=n,CargarComboListaCondiciones())},error:function(){}})}function CargarListaCamposArchivador(){lNombreArchivador=$("#DETALLE_PC_NOMBREARCHIVADOR").val();$.ajax({url:"../controladores/controladorCI.ashx?op=2100&NOMBREARCHIVADOR="+lNombreArchivador,method:"POST",dataType:"json",async:!0,success:function(n){n.toString().indexOf("ERROR")==-1&&(listaCamposArchivador=n,$("#DETALLE_PC_CAMPO").empty(),$.each(listaCamposArchivador,function(){$("#DETALLE_PC_CAMPO").append($("<option> <\/option>").val(this.COLUMN_NAME).html(this.COLUMN_NAME))}),$("#DETALLE_PC_CAMPO").val($($(objTarea).children()[3]).html()))},error:function(){}})}function CargarComboListaCondiciones(){$("#DETALLE_PC_CONDICION").empty();$.each(listaCondiciones,function(){$("#DETALLE_PC_CONDICION").append($("<option> <\/option>").val(this.valueOf()).html(this.valueOf()))})}function CargarParametrosGeneralesConfiguracion(){$.ajax({url:"../controladores/controladorCI.ashx?op=500",method:"POST",dataType:"json",async:!0,success:function(n){var r,t,u;if(n.toString().indexOf("ERROR")==-1)for(i=0;i<n.length;i++)switch(n[i].TIPOCAMPO){case"TEXTO":r=$("#"+n[i].NOMBRECAMPO);r.val(n[i].VALOR);r.attr("placeholder",n[i].AYUDA);break;case"LISTA":for(t=$("#"+n[i].NOMBRECAMPO),t.find("option").remove(),u=n[i].VALORES.split(","),k=0;k<u.length;k++)t.append("<option>"+u[k]+"<\/option>");t.val(n[i].VALOR)}else $("#lblError").show()},error:function(){$("#lblError").show()}})}function GuardarConfiguracionBotones(){frm=$("#formBotones");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=600",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function GuardarConfiguracionConsultaExterna(){frm=$("#formConsultaExterna");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=600",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function GuardarConfiguracionConsultaLite(){frm=$("#formConsultaLite");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=600",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function GuardarConfiguracionEmail(){frm=$("#formEmail");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=600",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function GuardarConfiguracionGeneral(){frm=$("#formGeneral");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=600",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function GuardarConfiguracionVisor(){frm=$("#formVisor");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=600",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function CorregirTamanoVisorPDF(){altoPanels=$(window).height()-120;$("#panelLeft").attr("style","max-height:"+altoPanels+"px");$("#panelRigth").attr("style","max-height:"+altoPanels+"px")}function GuardarConfiguracionDocuware(){frm=$("#formDocuware");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=600",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function GuardarConfiguracionAutenticacionConsulta(){frm=$("#formAutenticacionConsulta");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=600",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function GuardarConfiguracionConsultaLite(){frm=$("#formConsultaLite");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=600",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function GuardarConfiguracionVisorPdf(){frm=$("#formVisorPdf");datos=JSON.stringify(frm.serializeArray());$("#lblError").hide();$.ajax({url:"../controladores/controladorCI.ashx?op=600",method:"POST",dataType:"json",data:datos,async:!0,success:function(n){n.toString().indexOf("ERROR")==-1||$("#lblError").show()},error:function(){$("#lblError").show()}})}function CorregirColoresB(){estilo1="background-color:"+colorFondoPanelHeadingA+";\ncolor:"+colorTextoPanelHeadingA;$(".panel-heading").attr("style",estilo1)}function CargarTablaPermisosCampos(){$("#tblPermisosCampo").dataTable({destroy:!0});lLogin=$("#selUsuarioPermisos").val();url="../controladores/controladorCI.ashx?op=1500&lLogin="+lLogin;$("#tblPermisosCampo").dataTable({destroy:!0,paging:!0,ajax:{url:url,dataSrc:""},drawCallback:function(){$(".btnBorrar").click(function(){tarea=1;objTarea=$(this).parents(":eq(1)");lUsuario=$("#selUsuarioPermisos").val();$("#modalComfirmarTareaLabel").html("Borrar permiso usuario");$("#cuerpoVentanaComfirmarTarea").html("<h3>Comfirma el borrador del permiso por campo para: "+lUsuario+", para el campo: "+$($(objTarea).children()[3]).html()+", con el valor:"+$($(objTarea).children()[4]).html()+"<\/h3>");$("#modalConfirmarTarea").modal("show")});$(".btnActualizarPermisosCampo").click(function(){tarea=2;objTarea=$(this).parents(":eq(1)");$("#modalDetallePermisosCampoLabel").html("Modificar permiso usuario");$("#btnComfirmarDetallePermisosCampo").html("Actualizar");CargarCombosListaTablas();$("#DETALLE_PC_NOMBREARCHIVADOR").val($($(objTarea).children()[1]).html());$("#DETALLE_PC_VALOR").val($($(objTarea).children()[4]).html());$("#DETALLE_PC_CONDICION").val($($(objTarea).children()[5]).html());$("#DETALLE_PC_NOMBREARCHIVADOR_OLD").val($($(objTarea).children()[1]).html());$("#DETALLE_PC_CAMPO_OLD").val($($(objTarea).children()[3]).html());$("#DETALLE_PC_VALOR_OLD").val($($(objTarea).children()[4]).html());$("#DETALLE_PC_CONDICION_OLD").val($($(objTarea).children()[5]).html());$("#DETALLE_PC_NOMBREUSUARIO_OLD").val($($(objTarea).children()[2]).html());CargarListaCamposArchivador();$("#DETALLE_PC_CAMPO").val($($(objTarea).children()[3]).html());$("#modalDetallePermisosCampo").modal("show")})},columns:[{data:"BOTONES",orderable:!1},{data:"NOMBREARCHIVADOR",orderable:!1},{data:"NOMBREUSUARIO",orderable:!1},{data:"CAMPO",orderable:!1},{data:"VALOR",orderable:!1},{data:"CONDICION",orderable:!1},{data:"TIPOOBJETO",orderable:!1},{data:"TIPOPERMISO",orderable:!1},{data:"CONECTOR",orderable:!1}],language:{lengthMenu:"Mostrar _MENU_ registros por página",zeroRecords:"No se encontro ningún registro",info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"No se encontro ningún registro",infoFiltered:"(filtrado de  _MAX_ total registros)",search:"Buscar:",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"},loadingRecords:"Cargando registros...",processing:"Procesando...",ordering:!0}})}function CargarComboLoginsDw(){$("#selUsuarioPermisos").empty();$.each(listaLoginsDw,function(){$("#selUsuarioPermisos").append($("<option> <\/option>").val(this.LOGINDW).html(this.LOGINDW))})}function CargarCombosListaTablas(){$("#DETALLE_PC_NOMBREARCHIVADOR").empty();$.each(listaTablasArchivadoresDw,function(){$("#DETALLE_PC_NOMBREARCHIVADOR").append($("<option> <\/option>").val(this.TABLA).html(this.TABLA))});CargarListaCamposArchivador()}function CargarListaLoginsDw(){$.ajax({url:"../controladores/controladorCI.ashx?op=1400",method:"POST",dataType:"json",async:!0,success:function(n){n.toString().indexOf("ERROR")==-1?(listaLoginsDw=n,CargarComboLoginsDw()):$("#lblError").show()},error:function(){$("#lblError").show()}})}function CargarListaTablasArchivadoresDw(){$.ajax({url:"../controladores/controladorCI.ashx?op=1800",method:"POST",dataType:"json",async:!0,success:function(n){n.toString().indexOf("ERROR")==-1?listaTablasArchivadoresDw=n:$("#lblError").show()},error:function(){$("#lblError").show()}})}var colorFondoPanelHeadingA,colorTextoPanelHeadingA,colorFondoBodyPanelA,tarea,objTarea,listaLoginsDw,listaTablasArchivadoresDw,listaCondiciones,listaCamposArchivador;$(document).ready(function(){tarea=0;$("#btnLogOut").click(function(){window.location="loginAdmin.aspx"});$("#panelValoresConfiguracion").hide();$("#panelConexionPrincipal").hide();$("#panelTipoAutenticacion").hide();$("#panelBotones").hide();$("#panelConsultaExterna").hide();$("#panelConsultaLite").hide();$("#panelEmail").hide();$("#panelGeneral").hide();$("#panelVisor").hide();$("#panelAyuda").hide();$("#panelDocuware").hide();$("#panelAutenticacionConsulta").hide();$("#panelConsultaLite").hide();$("#panelVisorPdf").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide();$("#btnPanelPermisosCampo").click(function(){$("#panelDocuware").hide();$("#panelAutenticacionConsulta").hide();$("#panelConsultaLite").hide();$("#panelVisorPdf").hide();$("#panelPermisosCampos").show();$("#panelLicencia").hide();CargarTablaPermisosCampos()});$("#btnPanelDocuware").click(function(){$("#panelDocuware").show();$("#panelAutenticacionConsulta").hide();$("#panelConsultaLite").hide();$("#panelVisorPdf").hide();$("#panelPermisosCampos").hide();$("#panelLicencia").hide()});$("#btnPanelLicencia").click(function(){$("#panelDocuware").hide();$("#panelAutenticacionConsulta").hide();$("#panelConsultaLite").hide();$("#panelVisorPdf").hide();$("#panelLicencia").show();$("#panelPermisosCampos").hide()});$("#btnPanelAutenticacion").click(function(){$("#panelDocuware").hide();$("#panelAutenticacionConsulta").show();$("#panelConsultaLite").hide();$("#panelVisorPdf").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnPanelConsultaLite").click(function(){$("#panelDocuware").hide();$("#panelAutenticacionConsulta").hide();$("#panelConsultaLite").show();$("#panelVisorPdf").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnPanelVisorPdf").click(function(){$("#panelDocuware").hide();$("#panelAutenticacionConsulta").hide();$("#panelConsultaLite").hide();$("#panelVisorPdf").show();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnFormConexionPpal").click(function(){$("#panelConexionPrincipal").show();$("#panelTipoAutenticacion").hide();$("#panelBotones").hide();$("#panelConsultaExterna").hide();$("#panelConsultaLite").hide();$("#panelEmail").hide();$("#panelGeneral").hide();$("#panelVisor").hide();$("#panelAyuda").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnFormTipoAutenticacion").click(function(){$("#panelTipoAutenticacion").show();$("#panelConexionPrincipal").hide();$("#panelBotones").hide();$("#panelConsultaExterna").hide();$("#panelConsultaLite").hide();$("#panelEmail").hide();$("#panelGeneral").hide();$("#panelVisor").hide();$("#panelAyuda").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnFormBotones").click(function(){$("#panelBotones").show();$("#panelTipoAutenticacion").hide();$("#panelConexionPrincipal").hide();$("#panelConsultaExterna").hide();$("#panelConsultaLite").hide();$("#panelEmail").hide();$("#panelGeneral").hide();$("#panelVisor").hide();$("#panelAyuda").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnFormConsultaExterna").click(function(){$("#panelBotones").hide();$("#panelTipoAutenticacion").hide();$("#panelConexionPrincipal").hide();$("#panelConsultaExterna").show();$("#panelConsultaLite").hide();$("#panelEmail").hide();$("#panelGeneral").hide();$("#panelVisor").hide();$("#panelAyuda").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnFormConsultaExterna").click(function(){$("#panelBotones").hide();$("#panelTipoAutenticacion").hide();$("#panelConexionPrincipal").hide();$("#panelConsultaExterna").show();$("#panelConsultaLite").hide();$("#panelEmail").hide();$("#panelGeneral").hide();$("#panelVisor").hide();$("#panelAyuda").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnFormConsultaLite").click(function(){$("#panelBotones").hide();$("#panelTipoAutenticacion").hide();$("#panelConexionPrincipal").hide();$("#panelConsultaExterna").hide();$("#panelConsultaLite").show();$("#panelEmail").hide();$("#panelGeneral").hide();$("#panelVisor").hide();$("#panelAyuda").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnFormEmail").click(function(){$("#panelBotones").hide();$("#panelTipoAutenticacion").hide();$("#panelConexionPrincipal").hide();$("#panelConsultaExterna").hide();$("#panelConsultaLite").hide();$("#panelEmail").show();$("#panelGeneral").hide();$("#panelVisor").hide();$("#panelAyuda").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnFormGeneral").click(function(){$("#panelBotones").hide();$("#panelTipoAutenticacion").hide();$("#panelConexionPrincipal").hide();$("#panelConsultaExterna").hide();$("#panelConsultaLite").hide();$("#panelEmail").hide();$("#panelGeneral").show();$("#panelVisor").hide();$("#panelAyuda").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnFormVisor").click(function(){$("#panelBotones").hide();$("#panelTipoAutenticacion").hide();$("#panelConexionPrincipal").hide();$("#panelConsultaExterna").hide();$("#panelConsultaLite").hide();$("#panelEmail").hide();$("#panelGeneral").hide();$("#panelVisor").show();$("#panelAyuda").hide();$("#panelLicencia").hide();$("#panelPermisosCampos").hide()});$("#btnAyuda").click(function(){$("#panelPermisosCampos").hide();$("#panelBotones").hide();$("#panelTipoAutenticacion").hide();$("#panelConexionPrincipal").hide();$("#panelConsultaExterna").hide();$("#panelConsultaLite").hide();$("#panelEmail").hide();$("#panelGeneral").hide();$("#panelVisor").hide();$("#panelAyuda").show();altoFrmAyuda=$(window).height()-170;$("#frmAyuda").attr("style","width:100%;height:"+altoFrmAyuda+"px");urlAyuda="https://desarrollomicrocolsa.blob.core.windows.net/documentospublicos/Manuales/ConsultaInternet/ManualAdministracionCiHtml5.pdf";$("#frmAyuda").attr("src","https://docs.google.com/viewer?url="+urlAyuda+"&embedded=true")});$("#mnuValoresCfg").hide();$("#mnuGrupos").hide();$("#mnuPerfiles").hide();$("#mnuCruces").hide();$("#mnuSellos").hide();$("#mnuArchivadores").hide();CargarDatosServidor();$("#btnGuardarCfg").click(GuardarDatosServidor);$("#btnGuardarCfgBotones").click(GuardarConfiguracionBotones);$("#btnGuardarConsultaExternaCfg").click(GuardarConfiguracionConsultaExterna);$("#btnGuardarConsultaLiteCfg").click(GuardarConfiguracionConsultaLite);$("#btnGuardarEmailCfg").click(GuardarConfiguracionEmail);$("#btnGuardarGeneralCfg").click(GuardarConfiguracionGeneral);$("#btnGuardarVisorCfg").click(GuardarConfiguracionVisor);$("#btnGuardarDocuware").click(GuardarConfiguracionDocuware);$("#btnGuardarTipoAutenticacionConsulta").click(GuardarConfiguracionAutenticacionConsulta);$("#btnGuardarConsultaLite").click(GuardarConfiguracionConsultaLite);$("#btnGuardarVisorDocumentos").click(GuardarConfiguracionVisorPdf);CargarParametrosGeneralesConfiguracion();init();colorFondoPanelHeadingA="#216692";colorTextoPanelHeadingA="#ffffff";colorFondoBodyPanelA="#474747";CorregirColoresB();CorregirTamanoVisorPDF();$(window).resize(CorregirTamanoVisorPDF);$("#btnCancelarTarea").click(CancelarTarea);$("#btnCancelarDetallePermisosCampo").click(CancelarTarea);$("#btnComfirmarDetallePermisosCampo").click(ProcesarTarea);$("#btnProcesarTarea").click(ProcesarTarea);$("#DETALLE_PC_NOMBREARCHIVADOR").change(CargarListaCamposArchivador);$("#btnAdicionarPermisos").click(AdicionarPermisosCampo)});
//# sourceMappingURL=mainAdmin.min.js.map
